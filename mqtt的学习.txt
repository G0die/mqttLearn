发布订阅 https://blog.csdn.net/coderyjz/article/details/79422267
qos https://www.jianshu.com/p/8b0291e8ee02
第一个demo https://www.jianshu.com/p/b47fae7a654e
mqtt服务器搭建 https://blog.csdn.net/qq_29350001/article/details/76680646
Apollo下载  http://archive.apache.org/dist/activemq/activemq-apollo/1.7/
mqtt 只是协议 
mqtt服务器可以借用apolo activemq EMQ  等等
客户端可以使用java，c#。



问题 信息丢失（详细见微信收藏）


主题(Topic)通过’/’分割层级，支持’+’, ‘#’通配符:

'+': 表示通配一个层级，例如a/+，匹配a/x, a/y

'#': 表示通配多个层级，例如a/#，匹配a/x, a/b/c/d
服务端不能将 $ 字符开头的主题名匹配通配符 (#或+) 开头的主题过滤器


MQTT协议中的订阅、主题、会话

　　（1）订阅（Subscription）。订阅包含主题筛选器（Topic Filter）和最大服务质量（QoS）。订阅会与一个会话（Session）关联。一个会话可以包含多个订阅。每一个会话中的每个订阅都有一个不同的主题筛选器。

　　（2）会话（Session）。每个客户端与服务器建立连接后就是一个会话，客户端和服务器之间有状态交互。会话存在于一个网络之间，也可能在客户端和服务器之间跨越多个连续的网络连接。

　　（3）主题名（Topic Name）连接到一个应用程序消息的标签，该标签与服务器的订阅相匹配。服务器会将消息发送给订阅所匹配标签的每个客户端。

　　（4）主题筛选器（Topic Filter）一个对主题名通配符筛选器，在订阅表达式中使用，表示订阅所匹配到的多个主题。

　　（5）负载（Payload）消息订阅者所具体接收的内容。




MQTT协议中定义了一些方法（也被称为动作），来于表示对确定资源所进行操作。这个资源可以代表预先存在的数据或动态生成数据，这取决于服务器的实现。通常来说，资源指服务器上的文件或输出。主要方法有：

（1）Connect。等待与服务器建立连接。
（2）Disconnect。等待MQTT客户端完成所做的工作，并与服务器断开TCP/IP会话。
（3）Subscribe。等待完成订阅。
（4）UnSubscribe。等待服务器取消客户端的一个或多个topics订阅。
（5）Publish。MQTT客户端发送消息请求，发送完成后返回应用程序线程




有三种消息发布服务质量：
“至多一次”，消息发布完全依赖底层 TCP/IP 网络。会发生消息丢失或重复。这一级别可用于如下情况，环境传感器数据，丢失一次读记录无所谓，因为不久后还会有第二次发送。
“至少一次”，确保消息到达，但消息重复可能会发生。
“只有一次”，确保消息到达一次。这一级别可用于如下情况，在计费系统中，消息重复或丢失会导致不正确的结果。

level 0：最多一次的传输
level 1：至少一次的传输，(鸡肋)
level 2： 只有一次的传输




